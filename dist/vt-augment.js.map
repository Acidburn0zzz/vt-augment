{"version":3,"file":"vt-augment.js","sourceRoot":"","sources":["../src/vt-augment.ts"],"names":[],"mappings":"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","sourcesContent":["import conf from \"./config\"\n\nexport type VTAugmentOptions = {\n  [key: string]: any\n}\n\nconst CSS_SCOPE = '4rrgf4';\n\nconst COMMON_CSS = `\n  @keyframes spin-${CSS_SCOPE} {\n    to { transform: rotate(360deg); }\n  }\n  .spinner-${CSS_SCOPE} {\n    border: 8px solid rgba(0, 0, 0, 0.2);\n    border-left-color: white;\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    animation: spin-${CSS_SCOPE} 1.2s linear infinite;\n  };\n`;\n\nconst DRAWER_MODE_STYLESHEET = `\n  ${COMMON_CSS}\n  .vt-augment-drawer-${CSS_SCOPE} {\n    width: 700px;\n    background: #313d5a;\n    border: 1px solid #e6e6e6;\n    text-align: left;\n    z-index: 102;\n    position: fixed;\n    right: 0;\n    top: 0;\n    height: 100vh;\n    box-shadow: -4px 5px 8px -3px rgba(17, 17, 17, .16);\n    animation: slideToRight-${CSS_SCOPE} 0.5s 1 forwards;\n    transform: translateX(100vw);\n  }\n  .vt-augment-drawer-${CSS_SCOPE}[opened] {\n    display: block;\n    animation: slideFromRight-${CSS_SCOPE} 0.2s 1 forwards;\n  }\n  @keyframes slideFromRight-${CSS_SCOPE} {\n    0% {\n      transform: translateX(100vw);\n    }\n    100% {\n      transform: translateX(0);\n    }\n  }\n  @keyframes slideToRight-${CSS_SCOPE} {\n    100% {\n      transform: translateX(100vw);\n      display: none;\n    }\n  }\n`\n\nconst EMBEDDED_MODE_STYLESHEET = ``; // TODO\n\nexport class VTAugment {\n\n    protected constructor(\n      public _container: HTMLElement,\n      public _options: VTAugmentOptions) {\n        console.log('VT AUGMENT', 'constructor', _container, _options);\n        createStyleSheet(true);\n      }\n\n    static factory(container: HTMLElement = null, options: VTAugmentOptions = {}) { return new VTAugment(container, options) }\n\n    /**\n     * Sets the default options.\n     *\n     * @param options options dict\n     */\n    defaults(options: VTAugmentOptions) {\n      conf.defaults = options\n      return this\n    }\n\n    url(url: string) {\n      this.loading(true);\n      const _iframe = getIframe(this._container);\n\n      _iframe.onload = () => {\n        this.loading(false);\n      };\n\n      _iframe.src = url;\n      return this;\n    }\n\n    openDrawer() {\n      this._container.setAttribute('opened', '');\n    }\n\n    closeDrawer() {\n      this._container.removeAttribute('opened');\n    }\n\n    listen() {\n      // TODO\n    }\n\n    loading(active: boolean) {\n      const _spinner = getSpinner(this._container);\n      _spinner.style.display = active ? 'block' : 'none';\n    }\n}\n\nfunction createStyleSheet(drawerMode: boolean) {\n  const _stylesheet = document.createElement('style');\n  _stylesheet.innerHTML = drawerMode ? DRAWER_MODE_STYLESHEET : EMBEDDED_MODE_STYLESHEET;\n  document.body.appendChild(_stylesheet);\n}\n\nfunction getIframe(container: HTMLElement) {\n  let _iframe: HTMLIFrameElement = container.querySelector('iframe');\n\n  if (!_iframe) {\n    _iframe = document.createElement('iframe');\n    _iframe.style.width = '100%';\n    _iframe.style.height = '100%';\n    _iframe.setAttribute('frameborder', '0');\n    this._container.appendChild(_iframe);\n  }\n\n  return _iframe;\n}\n\nfunction getSpinner(container: HTMLElement) {\n  let _spinner: HTMLDivElement = container.querySelector('div.spinner');\n\n  if (!_spinner) {\n    _spinner = document.createElement('div');\n    _spinner.classList.add(`spinner-${CSS_SCOPE}`);\n    this._container.appendChild(_spinner);\n  }\n\n  return _spinner;\n}\n"]}